<%- include('headers/html-header', {}); -%><%- include('nav/navbar', { user:
user, showButton: true, pageState: "home" }); -%>
<div class="container-fluid pt-5">
  <div class="row w-100 pt-4 pb-3 px-2">
    <% if (user && user.id) { %>
    <div class="col-12">
      <div class="row">
        <div class="col-12 col-md-2"></div>
        <div class="col-12 col-md-8">
          <div class="d-grid">
            <a
              class="btn btn-lg btn-outline-success"
              href="/story"
              role="button"
              >+ Create a New Story</a
            >
          </div>
        </div>
        <div class="col-12 col-md-2"></div>
      </div>

      <hr />
    </div>
    <% } %> <% if (stories.length === 0) { %>
    <div class="col-12">
      <p class="text-center">
        There are no stories now. Start one by creating a new story!
      </p>
    </div>
    <% } else { %> <% stories.forEach((story) => { %>
    <div class="col-12 col-sm-6 col-md-4 d-flex">
      <a class="card-link d-flex mb-4 w-100" href="/story/<%= story.id %>">
        <div class="card">
          <div class="card-body d-flex flex-column">
            <div>
              <h3
                class="
                  card-title
                  mb-0
                  text-center text-md-start text-truncated
                  story-title-font
                "
              >
                <%= story.title %>
              </h3>
              <p class="text-center text-md-start mb-0">
                <small class="fst-italic"
                  >Created by: <%= story.created_username_fmt %></small
                >
              </p>
            </div>
            <hr />
            <div class="card-paragraph d-flex align-items-center">
              <p
                class="card-text text-center text-md-start story-paragraph-font"
              >
                <%= story.summary %>
              </p>
            </div>
          </div>
        </div>
      </a>
    </div>
    <% }); %> <% } %>
  </div>
</div>

<%- include('footers/html-footer'); -%>
